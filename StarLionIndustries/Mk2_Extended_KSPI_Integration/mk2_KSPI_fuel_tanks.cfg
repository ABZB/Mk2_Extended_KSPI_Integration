@PART[mk2*]:HAS[#author[SuicidalInsanity],@RESOURCE[Oxidizer]]NEEDS[Mk2Expansion,InterstellarFuelSwitch]:FIRST
{
	@RESOURCE[LiquidFuel]
	{
		@amount += #$/../RESOURCE[Oxidizer]/amount$
		@maxAmount += #$/../RESOURCE[Oxidizer]/maxAmount$
	}
	!RESOURCE[Oxidizer]{}
}
@PART[*]:HAS[@RESOURCE[LiquidFuel],!RESOURCE[Oxidizer],!RESOURCE[ElectricCharge]]:NEEDS[InterstellarFuelSwitch,WarpPlugin|CommunityResourcePack]:FIRST
{
	%MODULE[ModuleCrossFeed]
    { 
    }

	%LFamount = #$/RESOURCE[LiquidFuel]/maxAmount$
	@RESOURCE[LiquidFuel]
	{
		@amount *= 9
		@maxAmount *= 9
	}
	%percentage = 0
	%percentsquared = 0
	@percentage = #$/RESOURCE[LiquidFuel]/maxAmount$
	@percentage /= 26880
	
	@percentage != 0.3333333
	
	@percentsquared = #$/percentage$
	@percentsquared != 2
	%ArgonAmount = #$/RESOURCE[LiquidFuel]/maxAmount$
	@ArgonAmount *= 50
	%XenonAmount = #$/RESOURCE[LiquidFuel]/maxAmount$
	@XenonAmount *= 10
    MODULE
    {
		name = InterstellarFuelSwitch
		
		resourceGui = Ammonia;Argon Gas;Carbon Dioxide (Cryo);CarbonMonoxide (Cryo);Deuterium (Cryo);Helium (Cryo);Helium-3 (Cryo);Hexaborane;Hydrazine;Hydrogen (Cryo);Hydrogen Peroxide (Cryo);Kerosene;Methane (Cryo);Nitrogen (Cryo);Oxygen (Cryo);Tritium (Cryo);Water;Xenon Gas;Structural
		
		resourceNames = LqdAmmonia;ArgonGas;LqdCO2;LqdCO;LqdDeuterium;LqdHelium;LqdHe3;Hexaborane;Hydrazine;LqdHydrogen;HTP;Kerosene;LqdMethane;LqdNitrogen;LqdOxygen;LqdTritium;Water;XenonGas;Structural

		resourceAmounts = #$/../RESOURCE[LiquidFuel]/maxAmount$;$/../ArgonAmount$;$/../RESOURCE[LiquidFuel]/maxAmount$;$/../RESOURCE[LiquidFuel]/maxAmount$;$/../RESOURCE[LiquidFuel]/maxAmount$;$/../RESOURCE[LiquidFuel]/maxAmount$;$/../RESOURCE[LiquidFuel]/maxAmount$;$/../RESOURCE[LiquidFuel]/maxAmount$;$/../RESOURCE[LiquidFuel]/maxAmount$;$/../RESOURCE[LiquidFuel]/maxAmount$;$/../RESOURCE[LiquidFuel]/maxAmount$;$/../RESOURCE[LiquidFuel]/maxAmount$;$/../RESOURCE[LiquidFuel]/maxAmount$;$/../RESOURCE[LiquidFuel]/maxAmount$;$/../RESOURCE[LiquidFuel]/maxAmount$;$/../RESOURCE[LiquidFuel]/maxAmount$;$/../RESOURCE[LiquidFuel]/maxAmount$;$/../XenonAmount$;0

		@tankMass =  0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0

		%basePartMass = #$../mass$
		volumeMultiplier = 1.0
		massMultiplier = 1
		displayCurrentTankCost = false
		hasGUI = true
		availableInFlight = true
		availableInEditor = true
		showInfo = true
	}

	MODULE
	{
		name = FNModuleCryostat
		resourceName = LqdHelium
		resourceGUIName = LqdHelium
		powerReqKW = 45
		boilOffRate = 0
		boilOffTemp = 4.222
		boilOffMultiplier = 1
		boilOffBase = 16000
		boilOffAddition = 8.97215e-5
	}

	MODULE
	{
		name = FNModuleCryostat
		resourceName = LqdHe3
		resourceGUIName = Helium-3
		powerReqKW = 45
		boilOffRate = 0
		boilOffTemp = 4.222
		boilOffMultiplier = 1
		boilOffBase = 16000
		boilOffAddition = 8.97215e-5
	}

	MODULE
	{
		name = FNModuleCryostat
		resourceName = LqdDeuterium
		resourceGUIName = Deuterium
		powerReqKW = 45
		boilOffRate = 0
		boilOffTemp = 20.271
		boilOffMultiplier = 1
		boilOffBase = 16000
		boilOffAddition = 8.97215e-5
	}

	MODULE
	{
		name = FNModuleCryostat
		resourceName = LqdTritium
		resourceGUIName = Tritium
		powerReqKW = 45
		boilOffRate = 0
		boilOffTemp = 20.271
		boilOffMultiplier = 1
		boilOffBase = 16000
		boilOffAddition = 8.97215e-5
	}

	MODULE
	{
		name = FNModuleCryostat
		resourceName = LqdHydrogen
		resourceGUIName = LqdHydrogen
		powerReqKW = 45
		boilOffRate = 0
		boilOffTemp = 20.271
		boilOffMultiplier = 1
		boilOffBase = 16000
		boilOffAddition = 8.97215e-5
	}

	MODULE
	{
		name = FNModuleCryostat
		resourceName = LqdNitrogen
		resourceGUIName = LqdNitrogen
		powerReqKW = 45
		boilOffRate = 0
		boilOffTemp = 77.355
		boilOffMultiplier = 1
		boilOffBase = 16000
		boilOffAddition = 8.97215e-5
	}

	MODULE
	{
		name = FNModuleCryostat
		resourceName = LqdCO
		resourceGUIName = LqdCO
		powerReqKW = 45
		boilOffRate = 0
		boilOffTemp = 81.65
		boilOffMultiplier = 1
		boilOffBase = 16000
		boilOffAddition = 8.97215e-5
	}

	MODULE
	{
		name = FNModuleCryostat
		resourceName = LqdOxygen
		resourceGUIName = LqdOxygen
		powerReqKW = 45
		boilOffRate = 0
		boilOffTemp = 90.188
		boilOffMultiplier = 1
		boilOffBase = 16000
		boilOffAddition = 8.97215e-5
	}

	MODULE
	{
		name = FNModuleCryostat
		resourceName = LqdMethane
		resourceGUIName = LqdMethane
		powerReqKW = 45
		boilOffRate = 0
		boilOffTemp = 111.66
		boilOffMultiplier = 1
		boilOffBase = 16000
		boilOffAddition = 8.97215e-5
	}

	MODULE
	{
		name = FNModuleCryostat
		resourceName = LqdCO2
		resourceGUIName = LqdCO2
		powerReqKW = 45
		boilOffRate = 0
		boilOffTemp = 220
		boilOffMultiplier = 1
		boilOffBase = 16000
		boilOffAddition = 8.97215e-5
	}

	MODULE
	{
		name = FNModuleCryostat
		resourceName = HTP
		resourceGUIName = HTP
		powerReqKW = 45
		boilOffRate = 0
		boilOffTemp = 220
		boilOffMultiplier = 1
		boilOffBase = 16000
		boilOffAddition = 8.97215e-5
	}
	
	@MODULE[FNModuleCryostat],*
	{
		@boilOffMultiplier *= #$../percentage$
		@powerReqKW *= #$../percentsquared$
		@boilOffRate *= #$../percentsquared$
	}
	MODULE
    {
		name = ModuleElementRadioactiveDecay
		decayConstant = 1.7915586e-9
		resourceName = LqdTritium
		decayProduct = LqdHe3
		convFactor = 1
    }
	@RESOURCE[LiquidFuel]
	{
		@name = LqdAmmonia
	}
}

@PART[*]:HAS[@MODULE[InterstellarFuelSwitch],#LFamount[*]]:NEEDS[!RealFuels]
{
	@MODULE[InterstellarFuelSwitch]
	{
		@resourceGui = Ammonia;Argon Gas;Carbon Dioxide (Cryo);CarbonMonoxide (Cryo);Deuterium (Cryo);Helium (Cryo);Helium-3 (Compressed Gas);Hexaborane;Hydrazine;Hydrogen (Cryo);Hydrogen Peroxide (Cryo);LiquidFuel;Methane (Cryo);Nitrogen (Cryo);Oxygen (Cryo);Tritium (Compressed Gas, Shielded);Water;Xenon Gas;Structural
		
		@resourceNames = LqdAmmonia;ArgonGas;LqdCO2;LqdCO;LqdDeuterium;LqdHelium;LqdHe3;Hexaborane;Hydrazine;LqdHydrogen;HTP;LiquidFuel;LqdMethane;LqdNitrogen;LqdOxygen;LqdTritium;Water;XenonGas;Structural
		
		@resourceAmounts = #$/../RESOURCE[LqdAmmonia]/maxAmount$;$/../ArgonAmount$;$/../RESOURCE[LqdAmmonia]/maxAmount$;$/../RESOURCE[LqdAmmonia]/maxAmount$;$/../RESOURCE[LqdAmmonia]/maxAmount$;$/../RESOURCE[LqdAmmonia]/maxAmount$;$/../RESOURCE[LqdAmmonia]/maxAmount$;$/../RESOURCE[LqdAmmonia]/maxAmount$;$/../RESOURCE[LqdAmmonia]/maxAmount$;$/../RESOURCE[LqdAmmonia]/maxAmount$;$/../RESOURCE[LqdAmmonia]/maxAmount$;$/../LFamount$;$/../RESOURCE[LqdAmmonia]/maxAmount$;$/../RESOURCE[LqdAmmonia]/maxAmount$;$/../RESOURCE[LqdAmmonia]/maxAmount$;$/../RESOURCE[LqdAmmonia]/maxAmount$;$/../RESOURCE[LqdAmmonia]/maxAmount$;$/../XenonAmount$;0
	}
}

@PART[*]:HAS[@MODULE[InterstellarFuelSwitch]]:NEEDS[WarpPlugin|CommunityResourcePack]:NEEDS[RealFuels|ModularFuelTanks]:FINAL
{
	!MODULE[ModuleFuelTanks]{}
}

@PART[*]:HAS[@RESOURCE[LiquidFuel],!RESOURCE[Oxidizer],!RESOURCE[ElectricCharge],#LFamount[*]]:NEEDS[InterstellarFuelSwitch,WarpPlugin|CommunityResourcePack]:FINAL
{
	!percentage = NULL
	!percentsquared = NULL
	!LFamount = NULL
	!ArgonAmount = NULL
	!XenonAmount = NULL
}
//Stock FuelSwitch
@PART[*]:HAS[@RESOURCE[LiquidFuel],!RESOURCE[Oxidizer],!RESOURCE[ElectricCharge]]:NEEDS[InterstellarFuelSwitch,!WarpPlugin,!CommunityResourcePack]:FIRST//Stock Fuelswitch
{
	%MODULE[ModuleCrossFeed]
    { 
    }
	%percentage = 0
	%percentsquared = 0
	@percentage = #$/RESOURCE[LiquidFuel]/maxAmount$
	@percentage /= 26880
	
	@percentage != 0.3333333
	
	@percentsquared = #$/percentage$
	@percentsquared != 2
	%XenonAmount = #$/RESOURCE[LiquidFuel]/maxAmount$
	@XenonAmount *= 10
	
	%LF = #$/RESOURCE[LiquidFuel]/maxAmount$	
	%Oxi = #$/RESOURCE[LiquidFuel]/maxAmount$
	
	@LF *= .45
	@Oxi *= .55
    MODULE
    {
		name = InterstellarFuelSwitch
		resourceGui = LFO;LiquidFuel;Oxidizer;MonoPropellant;Xenon Gas;Structural
		resourceNames = LiquidFuel,Oxidizer;LiquidFuel;Oxidizer;MonoPropellant;XenonGas;Structural
		resourceAmounts = #$/../LF$,$/../Oxi$;$/../RESOURCE[LiquidFuel]/maxAmount$;$/../RESOURCE[LiquidFuel]/maxAmount$;$/../RESOURCE[LiquidFuel]/maxAmount$;$/../XenonAmount$;0
		%tankMass =  0;0;0;0;0;0


		%basePartMass = #$../mass$
		volumeMultiplier = 1.0
		massMultiplier = 1
		displayCurrentTankCost = false
		hasGUI = true
		availableInFlight = true
		availableInEditor = true
		showInfo = true
	}
	!LF = NULL
	!Oxi = NULL
	!XenonAmount = NULL
}