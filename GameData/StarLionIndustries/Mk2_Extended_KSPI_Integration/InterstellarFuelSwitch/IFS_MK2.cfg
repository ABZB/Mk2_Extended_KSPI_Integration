//prepares all of mk2 Expansion's parts for IFS
@PART[*]:HAS[#author[SuicidalInsanity],@RESOURCE[LiquidFuel],@RESOURCE[Oxidizer]]:NEEDS[Mk2Expansion,InterstellarFuelSwitch,RealFuels|ModularFuelTanks]:FIRST
{
	@RESOURCE[LiquidFuel]
	{
		@amount += #$/../RESOURCE[Oxidizer]/amount$
		@maxAmount += #$/../RESOURCE[Oxidizer]/maxAmount$
	}
	!RESOURCE[Oxidizer]{}
}

//prepares all of mk2 Expansion's parts for IFS
@PART[*]:HAS[#author[SuicidalInsanity],@RESOURCE[LiquidFuel],@RESOURCE[MonoPropellant]]:NEEDS[Mk2Expansion,InterstellarFuelSwitch,RealFuels|ModularFuelTanks]:FIRST
{
	@RESOURCE[LiquidFuel]
	{
		@amount += #$/../RESOURCE[MonoPropellant]/amount$
		@maxAmount += #$/../RESOURCE[MonoPropellant]/maxAmount$
	}
	!RESOURCE[MonoPropellant]{}
}

//mk-2 form KSPI fuel parts
+PART[mk2UST]:NEEDS[WarpPlugin]:FIRST
{
	@name = M2X_PreCooler
	@mass += 0.05
	@TechRequired = supersonicFlight
	@cost = 750
	@category = Aero
	@title = Mk2 Pre-Cooler
	@description = A magnificent piece of engineering that pre-cools the air flow from atmospheric engines, preventing overheating at high speeds.
	MODULE
	{
		name = FNModulePreecooler
	}
	!RESOURCE[*]{}
	!RESOURCE[*]{}
	!RESOURCE[*]{}
	!RESOURCE[*]{}
}
+PART[mk2UST]:NEEDS[WarpPlugin]:FIRST
{
	@name = M2X_Antimatter_Storage_Tank
	@mass = .62
	@TechRequired = exoticFuelStorage
	@cost = 2501573
	@title = Mk2 Antimatter Containment Device
	@description = A Mk2-form container for Antimatter.  Antimatter not included.
	
	!RESOURCE[*]{}
	!RESOURCE[*]{}
	!RESOURCE[*]{}
	!RESOURCE[*]{}
	RESOURCE
	{
		name = Antimatter
		amount = 0
		maxAmount = 24646
	}
    MODULE
    {
		name = InterstellarFuelSwitch
		resourceGui = Antimatter
		resourceNames = Antimatter
		resourceAmounts = 24646
		%tankMass =  0
		
		%basePartMass = #$../mass$
		volumeMultiplier = 1.0
		massMultiplier = 1
		displayCurrentTankCost = false
		hasGUI = true
		availableInFlight = true
		availableInEditor = true
		showInfo = true
	}

	MODULE
	{
		name = AntimatterStorageTank
		chargeNeeded = 15.4
	}
}

@PART[*]:HAS[@MODULE[FNModulePreecooler]]:NEEDS[WarpPlugin]:AFTER[WarpPlugin]
{
	!RESOURCE[*],*{}
	!MODULE[InterstellarFuelSwitch]{}
	!MODULE[FNModuleCryostat],*{}
	!MODULE[ModuleFuelTanks]{}
}